<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="paperformat_tax_report" model="report.paperformat">
        <field name="name">Invoice Tax</field>
        <field name="format">custom</field>
        <field name="page_height">0</field>
        <field name="page_width">0</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">0</field>
        <field name="margin_bottom">0</field>
        <field name="margin_left">0</field>
        <field name="margin_right">0</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">0</field>
        <field name="dpi">90</field>
    </record>

    <report
            id="report_sale_report_action"
            model="account.move"
            string=" Surya Tax Invoice Report"
            report_type="qweb-pdf"
            name="sale_quotation.report_tax_order_report"
            file="sale_quotation.report_tax_order_report"
            paperformat="sale_quotation.paperformat_tax_report"
            print_report_name='"surya Invoice Tax"'
            menu="True"
    />

    <template id="report_tax_order_report">
        <t t-call="web.html_container">
            <t t-call="web.basic_layout">
                <t t-set="ddd" t-value="0.0"/>
                <t t-foreach="docs" t-as="doc">
                    <t t-foreach="doc.invoice_line_ids" t-as="line">
                        <t t-set="ddd" t-value="ddd + 1"/>
                    </t>
                    <div class="page">
                        <header>
                            <div style="margin-top:-40px">
                                <img src='sale_quotation/static/images/header.jpg'
                                     style="width:100%;"/>
                            </div>
                        </header>
                    </div>
                    <div align="center" style="margin-top:20px">
                        <span>Tax Invoice</span>
                    </div>
                    <t>
                        <style>
                            .table-container {
                            display: flex;
                            flex-direction: column;
                            }

                            .table {
                            border: 1px solid black;
                            margin-bottom: 0px;
                            }
                        </style>
                        <table class="table fnt"
                               style="width:100%;height:180mm;">
                            <thead>
                                <tr>
                                    <td colspan="5"
                                        style="border:1px solid #143980;font-size:12px;height:33.33% !important;display:table-cell;padding-left: 6px;">
                                        <span style="color:black;">Invoice No</span>
                                        <span style="color:black;padding-left:100px">:</span>
                                        <br/>
                                        <span style="color:black;">Invoice Date</span>
                                        <span style="color:black;padding-left:90px">:</span>
                                        <span style="color:black;font-style: normal;"
                                              t-esc="doc.invoice_date"/>
                                        <br/>
                                        <strong style="color:#143980;">Details Of Buyer(Billed To)</strong>
                                        <span style="color:black;padding-left:13px">:</span>
                                        <br/>
                                        <strong style="color:#143980;">Customer ID :</strong>
                                        <span style="color:black;padding-left:82px">:</span>
                                        <span style="color:black;font-style: normal;"
                                              t-esc="doc.partner_id.customer_id"/>
                                        <br/>
                                        <!-- <strong>
                                             <span style="color:black;font-style: normal;"
                                                   t-esc="doc.partner_id.name"/>
                                         </strong>-->
                                        <span style="color:black;">Name</span>
                                        <span style="color:black;padding-left:124px">:</span>
                                        <span style="color:black;font-style: normal;"
                                              t-esc="doc.partner_id.name"/>
                                        <!--                                        <span style="color:black;font-style: normal;"/>-->
                                        <br/>
                                        <span style="color:black;">Address</span>
                                        <span style="color:black;padding-left:112px">:</span>
                                        <span style="color:black;font-style: normal;"/>
                                        <span style="color:black;font-style: normal;"
                                              t-esc="doc.partner_id.street"/>,
                                        <span style="color:black;font-style: normal;"
                                              t-esc="doc.partner_id.street2"/>
                                        <br/>
                                        <span style="color:black;">GSTIN</span>
                                        <span style="color:black;padding-left:120px">:</span>
                                        <span style="color:black;font-style: normal;"
                                              t-esc="doc.partner_id.vat"/>
                                        <br/>
                                        <span style="color:black;">State</span>
                                        <span style="color:black;padding-left:127px">:</span>
                                        <span style="color:black;font-style: normal;"/>
                                        <span style="color:black;font-style: normal;"
                                              t-esc="doc.partner_id.state_id.name"/>
                                        <span style="color:black;padding-left:40px">StateCode</span>
                                        <span style="color:black;padding-left:10px">:</span>
                                        <span style="color:black;font-style: normal;"/>
                                        <span style="color:black;font-style: normal;"
                                              t-esc="doc.partner_id.state_id.code"/>
                                        <br/>
                                        <span style="color:black;">Mobile NO</span>
                                        <span style="color:black;padding-left:97px">:</span>
                                        <span style="color:black;font-style: normal;"
                                              t-esc="doc.partner_id.mobile"/>
                                    </td>
                                    <td colspan="7"
                                        style="padding:1px;border:1px solid #143980;font-size:12px;height:33.33% !important;display:table-cell;padding-left: 6px;">
                                        <span style="color:black;">Dispatch Through</span>
                                        <span style="color:black;padding-left:10px">:</span>
                                        <br/>
                                        <span style="color:black;">Dispatch Details</span>
                                        <span style="color:black;padding-left:18px">:</span>
                                        <span style="color:black;font-style: normal;"
                                              t-esc="doc.invoice_date"/>
                                        <br/>
                                        <strong style="color:#143980;"></strong>
                                        <br/>
                                        <br/>
                                        <strong style="color:#143980;">Customer ID</strong>
                                        <span style="color:black;padding-left:35px">:</span>
                                        <span style="color:black;font-style: normal;"
                                              t-esc="doc.partner_id.customer_id"/>
                                        <br/>
                                        <!--                                        <strong>-->
                                        <!--                                            <span style="color:black;font-style: normal;"-->
                                        <!--                                                  t-esc="doc.partner_id.name"/>-->
                                        <!--                                        </strong>-->
                                        <span style="color:black;">Name</span>
                                        <span style="color:black;padding-left:72px">:</span>
                                        <span style="color:black;font-style: normal;"/>
                                        <span style="color:black;font-style: normal;"
                                              t-esc="doc.partner_id.name"/>
                                        <br/>
                                        <span style="color:black;">Address</span>
                                        <span style="color:black;padding-left:60px">:</span>
                                        <span style="color:black;font-style: normal;"/>
                                        <span style="color:black;font-style: normal;"
                                              t-esc="doc.partner_id.street"/>,
                                        <span style="color:black;font-style: normal;"
                                              t-esc="doc.partner_id.street2"/>
                                        <br/>
                                        <span style="color:black;">GSTIN</span>
                                        <span style="color:black;padding-left:68px">:</span>
                                         <span style="color:black;font-style: normal;"
                                              t-esc="doc.partner_id.vat"/>
                                        <br/>
                                        <span style="color:black;">State</span>
                                        <span style="color:black;padding-left:75px">:</span>
                                        <span style="color:black;font-style: normal;"/>
                                        <span style="color:black;font-style: normal;"
                                              t-esc="doc.partner_id.state_id.name"/>
                                        <span style="color:black;padding-left:30px">StateCode</span>
                                        <span style="color:black;padding-left:10px">:</span>
                                        <span style="color:black;font-style: normal;"/>
                                        <span style="color:black;font-style: normal;"
                                              t-esc="doc.partner_id.state_id.code"/>
                                        <br/>
                                        <span style="color:black;">Mobile NO</span>
                                        <span style="color:black;padding-left:45px">:</span>
                                        <span style="color:black;font-style: normal;"
                                              t-esc="doc.partner_id.mobile"/>
                                    </td>
                                </tr>
                                <tr style="color:#143980;height:3px !important;font-size:12px;">
                                    <th class="text-center" style="padding:1px;width:1%;border:1px solid #143980;">Sl.No
                                    </th>
                                    <t>
                                        <th colspan="2" class="text-center"
                                            style="padding:1px;width:30%;border:1px solid #143980;">Description
                                        </th>
                                    </t>
                                    <th class="text-center" style="padding:1px;width:8%;border:1px solid #143980;">HSN
                                    </th>
                                    <th class="text-center" style="padding:1px;width:6%;border:1px solid #143980;">GST
                                        %
                                    </th>
                                    <th class="text-center" style="padding:1px;width:5%;border:1px solid #143980;">
                                        Quantity
                                    </th>
                                    <th class="text-center" style="padding:1px;width:5%;border:1px solid #143980;">UOM
                                    </th>
                                    <th class="text-center" style="padding:1px;width:10%;border:1px solid #143980;">
                                        Wt(in kgs)&#160;(&#8377;)
                                    </th>

                                    <th class="text-center" style="padding:1px;width:10%;border:1px solid #143980;">
                                        Rate&#160;(&#8377;)
                                    </th>
                                    <th class="text-center" style="padding:1px;width:8%;border:1px solid #143980;">
                                        Amount&#160;(&#8377;)
                                    </th>
                                    <th class="text-center" style="padding:1px;width:18%;border:1px solid #143980;">
                                        SKU Code
                                    </th>
                                </tr>
                            </thead>
                            <tbody style="width:100%;border:1px solid #143980;font-size:12px;">
                                <!-- Variables declaration start -->
                                <t t-set="i" t-value="1"/>
                                <t t-set="disc" t-value="0"/>
                                <t t-set="disc_tot" t-value="0"/>
                                <t t-set="amttotal" t-value="0"/>
                                <t t-set="consol" t-value="doc.consolidated_quantities()"/>
                                <t t-foreach="consol" t-as="consolines">
                                    <t t-set="tot_amt" t-value="0"/>
                                    <t t-set="tot_qty" t-value="0"/>
                                    <t t-foreach="doc.line_ids" t-as="line">
                                        <t t-if="line.product_id == consolines['product']">
                                            <t t-set="tot_qty" t-value="tot_qty + line.product_uom_qty"/>
                                            <t t-set="tot_amt" t-value="tot_amt + line.price_subtotal"/>
                                        </t>
                                    </t>
                                    <tr style="height:1px;border-right:1px solid black !important;">
                                        <td class="text-center"
                                            style="width:1%;color:black;border-left:1px solid #143980;border-bottom:none !important;">
                                            <span t-esc="i"/>
                                            <t t-set="i" t-value="i+1"/>
                                        </td>
                                        <t t-if="ddd != 0">
                                            <td colspan="2" class="text-left"
                                                style="width:35%;color:black;border-left:1px solid #143980; border-bottom:none !important;">
                                                <span t-esc="consolines['product']"/>
                                            </td>
                                        </t>
                                        <!--<t t-else="">
                                            <td colspan="3" class="text-left"
                                                style="width:35%;color:black;border-left:1px solid #143980; border-bottom:none !important;;">
                                                <span t-esc="consolines['product']"/>
                                            </td>
                                        </t>-->
                                        <td class="text-center"
                                            style="width:8%;color:black;border-left:1px solid #143980;border-bottom:none !important;">
                                            <span t-esc="consolines['hsn_code']"/>
                                        </td>
                                        <td class="text-center"
                                            style="width:10%;color:black;border-left:1px solid #143980;border-bottom:none !important;">
                                            <!--                                            <span t-esc="(consolines['taxids'])"/>-->
                                            <span>-</span>
                                        </td>
                                        <td style="width:10%;color:black;border-left:1px solid #143980;border-bottom:none !important;">
                                            <span t-esc="(consolines['quantity'])"/>
                                        </td>
                                        <td style="width:10%;color:black;border-left:1px solid #143980;border-bottom:none !important;">
                                            <span t-esc="(consolines['product_uom'])"/>
                                        </td>
                                        <td class="text-right"
                                            style="width:5%;color:black;border-left:1px solid #143980;border-bottom:none !important;">
                                            <!--                                            <span t-esc="(consolines['product_uom'])"/>-->
                                            <span>-</span>
                                        </td>
                                        <td class="text-right"
                                            style="width:10%;border-left:1px solid #143980;color:black;border-bottom:none !important;">
                                            <span t-esc="'%.2f'%(consolines['rate'])"/>
                                        </td>
                                        <td class="text-right"
                                            style="width:10%;color:black;border-left:1px solid #143980;border-right:1px solid #143980;border-bottom:none !important;">
                                            <span t-esc="'%.2f'%(tot_amt)"/>
                                        </td>
                                        <td class="text-center"
                                            style="width:15%;color:black;border-left:1px solid #143980;border-right:1px solid #143980;border-bottom:none !important;">
                                            <span>-</span>
                                        </td>
                                    </tr>
                                </t>
                                <tr>
                                    <td style="border-left:1px solid #143980;border-top: none !important;"/>
                                    <t t-if="ddd != 0">
                                        <td colspan="2"
                                            style="border-left:1px solid #143980;border-top: none !important;"/>
                                    </t>
                                    <t t-else="">
                                        <td colspan="3"
                                            style="border-left:1px solid #143980;border-top: none !important;"/>
                                    </t>
                                    <td style="border-left:1px solid #143980;border-top: none !important;"/>
                                    <td style="border-left:1px solid #143980;border-top: none !important;"/>
                                    <td style="border-left:1px solid #143980;border-top: none !important;"/>
                                    <td style="border-left:1px solid #143980;border-top: none !important;"/>
                                    <td style="border-left:1px solid #143980;border-top: none !important;border-right: 1px solid;"/>
                                    <t t-if="ddd != 0">
                                        <td style="border-left:1px solid #143980;border-top: none !important;border-right: 1px solid;"/>
                                    </t>
                                    <td style="border-left:1px solid #143980;border-top: none !important;border-right: 1px solid;"/>
                                    <td style="border-left:1px solid #143980;border-top: none !important;border-right: 1px solid;"/>
                                </tr>
                            </tbody>
                        </table>
                    </t>
                    <table class="table table-sm table-bordered"
                           style="width:100%;border:1px solid #143980;font-size:12px;margin-top:-10">
                        <tr style="height:3px !important;font-size:12px;">
                            <th colspan="3" rowspan="2"
                                style="padding:1px;border:1px solid #143980;border-top:1px solid #143980;font-size:12px;text-align:center">
                                <strong style="color:#143980">Table Value</strong>
                            </th>
                            <td colspan="2"
                                style="border:1px solid #143980;text-align:center">
                                <strong style="color:#143980">SGST</strong>
                            </td>
                            <td colspan="2"
                                style="border:1px solid #143980;text-align:center">
                                <strong style="color:#143980">CGST</strong>
                            </td>
                            <td colspan="2"
                                style="border:1px solid #143980;text-align:center">
                                <strong style="color:#143980">IGST</strong>
                            </td>
                        </tr>
                        <tr>
                            <td style="border:1px solid #143980;">
                                <span>Rate%</span>
                            </td>
                            <td style="border:1px solid #143980;">
                                <span>Amount</span>
                            </td>
                            <td style="border:1px solid #143980;">
                                <span>Rate%</span>
                            </td>
                            <td style="border:1px solid #143980;">
                                <span>Amount</span>
                            </td>
                            <td style="border:1px solid #143980;">
                                <span>Rate%</span>
                            </td>
                            <td style="border:1px solid #143980;">
                                <span>Amount</span>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3">0.00
<!--                                <span t-esc="(consolines['taxids'])"/>-->
                            </td>
                            <td>
                                <span t-esc="(consolines['taxids'])"/>
                            </td>
                            <td>
                                <t t-set="sgst" t-value="doc.amount_tax / 2"/>
                                <span t-esc="sgst"/>
                            </td>
                            <td>
                                <span t-esc="(consolines['taxids'])"/>
                            </td>
                            <td>
                                 <t t-set="cgst" t-value="doc.amount_tax / 2"/>
                                <span t-esc="cgst"/>
                            </td>
                            <td align="center">-</td>
                            <td align="center">-</td>
                        </tr>
                        <tr>
                            <td colspan="3">0.00</td>
                            <td colspan="2">0.00</td>
                            <td colspan="2">0.00</td>
                            <td colspan="2">0.00</td>
                        </tr>
                        <tr>
                            <td colspan="5" rowspan="2">Amount in Words</td>
                            <td colspan="2">Round Off</td>
                            <td colspan="2">-</td>
                        </tr>
                        <tr>
                            <td colspan="2">Total Po Value</td>
                            <td colspan="2">0.00</td>
                        </tr>
                        <tr>
                            <td colspan="3" rowspan="3">Special Instruction</td>
                            <td colspan="3" rowspan="3">Delivery Location</td>
                            <td colspan="3" rowspan="3">
                                Authorised Signature
                                <br/>
                                <img src='sale_quotation/static/images/sign.png'/>
                            </td>
                        </tr>
                        <tr>
                        </tr>
                        <tr>
                        </tr>
                        <tr>
                        </tr>
                        <tr>
                        </tr>
                    </table>
                </t>
                <div>
                    <footer>
                        <div style="margin-top:110px">
                            <img src='sale_quotation/static/images/footer.jpg'
                                 style="width:100%;"/>
                        </div>
                    </footer>
                </div>
            </t>

        </t>
    </template>
</odoo>
